=== 託送常時バックアップ計画メール提出

==== 概要

[.lead]
各託送事業者に常時バックアップ計画メールの提出を行う

[plantuml]
--
cloud JEPX {
  file "インプットファイル" as input
}

rectangle SCM {
  (JEPXインバランスβ値取込) as (main)
  database "JEPXインバランスβ値" as output
}

input --> main : input
main --> output : output
--

===== I/O

|======================================
| 名称                    | 物理名               | 種類 | I/O種別 | 備考
| バランシンググループ                     | balancing_groups          | DB   | I       |
| BGメンバー                               | bg_members                | DB   | I       |
| リソース                                 | resources                 | DB   | I       |
| 広域需要調達計画(翌日)                   | occto_plans               | DB   | O       |
| 広域需要調達計画(翌日)BGメンバー別データ | occto_plan_by_bg_members  | DB   | O       |
| 広域需要調達計画(翌日)詳細値データ       | occto_plan_detail_values  | DB   | O       |
| Excelテンプレート(単独用)                |   | xlsx   | I       |
| Excelテンプレート(複数用)                |   | xlsx   | I       |
|======================================

===== パラメータ

|======================================
| 名称 | 物理名 | 必須 | 備考
| バランシンググループID     |        |      |
| 日付                       |        |      |
|======================================

<<<

==== 処理詳細

=====

. 指定されたバランシンググループIDよりバランシンググループを取得する
. 指定されたバランシンググループIDと日付に合致する広域需要調達計画(翌日)を取得する
.. データが取得できない場合は、処理を中止する
. 各BGメンバー別データより、リソース区分がJBUの詳細値があるものを抽出する
. 抽出したデータについて、エリア別に指定された様式で添付ファイルのデータを作成する
. 作成した添付ファイルを送信する
NOTE:

<<<
